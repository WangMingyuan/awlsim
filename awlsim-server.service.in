[Unit]
Description=Awlsim soft-PLC core server
After=syslog.target
After=network.target

[Service]
Type=simple
TimeoutSec=60
Restart=on-failure
RestartSec=100ms
User=@USER@
Group=@GROUP@
WorkingDirectory=@WORKING_DIRECTORY@
Nice=-15

ExecStart=@PYTHON@ @PREFIX@/bin/awlsim-server -l localhost -4 -S -w @PROJECT@
ExecStartPost=-@PYTHON@ @PREFIX@/bin/awlsim-client -c localhost -r RUN

Environment=PYTHONPATH=@PYTHON_SITE@ PYTHONHASHSEED=0 PYTHONOPTIMIZE=1 PYTHONDONTWRITEBYTECODE=1 AWLSIM_CYTHON=1 AWLSIM_SCHED=realtime-if-multicore AWLSIM_PRIO=50 AWLSIM_AFFINITY=-1,-2,-3 AWLSIM_MLOCK=1

[Install]
WantedBy=multi-user.target
